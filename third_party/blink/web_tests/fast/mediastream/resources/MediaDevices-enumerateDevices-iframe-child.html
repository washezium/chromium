<script>
  navigator.mediaDevices.getUserMedia({audio:true, video:true}).then(stream => {
    stream.getTracks().forEach(track => track.stop());
    navigator.mediaDevices.enumerateDevices().then(devices => {
      window.parent.postMessage(JSON.stringify(devices), "*");
    });
  });
</script>
