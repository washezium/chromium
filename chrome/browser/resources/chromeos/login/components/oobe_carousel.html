<!-- Copyright 2020 The Chromium Authors. All rights reserved.
     Use of this source code is governed by a BSD-style license that can be
     found in the LICENSE file. -->

<link rel="import" href="chrome://resources/html/polymer.html">
<link rel="import" href="chrome://resources/cr_elements/cr_icon_button/cr_icon_button.html">
<link rel="import" href="chrome://resources/cr_elements/icons.html">

<!--
  Simple OOBE polymer element which is used for displaying slides in a carousel.
  It has fixed height and width which match general width and height oobe-dialog
  restrictions.

  Example (each slide must be within a oobe-slide tag):
    <oobe-carousel slide-duration="2">
      <div slot="slides">Slide 1</div>
      <div slot="slides">Slide 2</div>
      <div slot="slides">Slide 3</div>
    </oobe-carousel>
-->

<dom-module id="oobe-carousel">
  <template>
    <style>
      :host {
        height: 100%;
        width: 100%;
      }

      #container {
        height: 100%;
        overflow: hidden;
        position: relative;
        white-space: nowrap;
        width: 100%;
      }

      #slidesContainer {
        background: white;
        height: 100%;
        position: relative;
        width: 100%;
        will-change: transform;
      }
      #slidesContainer ::slotted(*) {
        height: 100%;
        overflow-x: hidden;
        position: absolute;
        width: 100%;
      }

      #navigationContainer {
        bottom: 8px;
        display: flex;
        left: 50%;
        position: absolute;
        transform: translateX(-50%);
      }

      #dotsContainer {
        display: flex;
      }

      ::slotted(.animated) {
        /* cubic-bezier(.51, .92, .24, 1) makes animation of transition similar
           to basic slide rotation. */
        transition: transform 1.0s cubic-bezier(.51, .92, .24, 1);
      }

      ::slotted(.backward) {
        transform: var(--oobe-backward-slide-animation);
      }

      ::slotted(.forward) {
        transform: var(--oobe-forward-slide-animation);
      }

      .buttons {
        height: 20px;
        margin-inline-end: 0;
        margin-inline-start: 0;
        width: 20px;
      }

      .slider-dot {
        background: var(--google-grey-200);
        border-radius: 5px;
        height: 10px;
        margin: 5px;
        pointer-events: none;
        transition: background 1s;
        width: 10px;
      }
      .slider-dot[active] {
        background: var(--google-blue-600);
      }

      .arrow-button {
        --cr-icon-button-fill-color: var(--google-grey-400);
      }
    </style>
    <div id="container">
      <div id="slidesContainer">
        <slot id="slot" name="slides"></slot>
      </div>
      <div id="navigationContainer">
        <cr-icon-button id="left" class="buttons" iron-icon="cr:chevron-left"
            class="arrow-button" on-click="movePrev"></cr-icon-button>
        <div id="dotsContainer">
          <template is="dom-repeat" items="[[dots]]">
            <span class="slider-dot" aria-hidden="true"
                tabindex="-1" active$="[[isActive_(index, slideIndex)]]"></span>
          </template>
        </div>
        <cr-icon-button id="right" class="buttons" iron-icon="cr:chevron-right"
            class="arrow-button" on-click="moveNext"></cr-icon-button>
      </div>
    </div>
  </template>
</dom-module>
